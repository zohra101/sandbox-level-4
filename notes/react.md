# React JS
- A node module.
- Creates web pages with JavaScript instead of HTML.
- HTML web pages are static - they don't change.
- JavaScript web pages are dynamic - they can change.

### React preview 
- Render plain HTML with React.
- Output a variable.
- Add a <button > with a click handler.
- Add a <form> with a submit handler.npm 

```javascript
import React from "react";
import handleClick from "./utils/handleClick";
import handleSubmit from "./utils/handleSubmit";

const message = "Amazing world!";
const root = createRoot(window.bodyTag);
root.render(
<main>
    <h1>Hello React</h1>
    <h2>Start editing to see some magic hap</h2>
    <h3>{message}</h3>
    <button onClick={handleClick}>Click</button>
    <form onSubmit={handleSubmit}>
        <input/>
        <input type="button"></input>        
    </form>
</main>
) ;
```

```javascript
export default function handleSubmit(event = new Event()) {
    event.preventDefault();
    console.log(event);
}
```

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <title></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
    rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" 
    crossorigin="anonymous">
    <script src="index.js" defer></script>
</head>
<body>
    <header>
    </header>
    <main>
        <body id="bodyTag">

        </body>

    </main>
    <footer>
    </footer>
</body>
</html>
```
```javascript
import { createRoot } from "react-dom/client";

const root = createRoot(window.bodyTag);
root.render(<h1>Hello, world!</h1>); 
```

### Installation
- React uses 2 packages:
  1.  `react`-- The main react functions and classes
    - Contains the methods for converting HTML into JavaScript
  2.  `react-dom`--More functions and classes to use react
    - Contains functions for manipulating the DOM

- `npm init`
- `npm install react react-dom`

### DOM--Document Object Model
  - Represents HTML as a tree of objects.
  - Represented by the `document` object.
  - The function `createRoot` is from `react-dom`.
  - The function `createRoot` manipulates the DOM.

### React setup

```javascript
import React from "react"
import { createRoot} from "react-dom/client";

const root = createRoot(window.bodyTag);
root. render (<h1>Hello world!‹/h1>);
 ```
`createRoot` needs an HTML element.

1. Create `index.html` and add boilerplate tags.
2. Create `index.js` and connect it to `index.html`. 
3. Import and use React package:
4. React renders the object into the specified root element. 

### Using React with Webpack
- React is an external module.
- Webpack can make external modules work in the browser.
- 
1. Install webpack into the React workspace.
2. Set up the Webpack folder structure `src/index.js`. <script src=".src/index.js" defer></script>.
   -`defer` loads the script after the HTML file has rendered. 
3. Let `index.html` use the `dist/main.js` instead.
4. Try to render the program in the browser.

### Babel
- HTML is not valid JavaScript.
- HTML must be compiled or converted to useable JavaScript.
- Babel is a JavaScript compiler.
- It can compile HMI into browser-compatible JavaScript.

1. View the Babel website https://babeljs.io/.
2. Insert HTML into the online compiler to convert it to JavaScript.
3. Copy the code into your React program and run it.

### Comping HTML to JavaScript
- Copy the HTML and paste it into the Babel website.
- Copy the compiled code into `index.js`.
- Comment out the `import` lines for React.
- Run `npx webpack`

### Installing Babel
- `npm install --save-dev @babel/core @babel/cli`

### Babel command line
- Provides instructions to the terminal for how to compile Babel with React
`npx babel ./src/index.js --presets=@babel/preset-react --out-file ./src/index.babel.js` 

1. `npx babel` 
2. Specify the file to compile `./src/index.js`.
3. Specify the instructions `--presets=@babel/preset-react`.
4. Specify the output file `--out-file ./src/index.babel.js`.

#### Index.js
```javascript
import { createRoot } from "react-dom/client";
import React from "react";
const root = createRoot (window.bodyTag) ;
root.render(/*#__PURE_*/ React.createElement("h1", null, "Hello))
```
### React with Webpack and Babel
- Use the compiled Babel file with Webpack.
- Updating changes can be tedious with the command line.
  
1. Make changes. 
2. Let `index.js` contain the code compiled with Babel.
3. Re-compile with Babel.
4. Re-bundle with `npx webpack`.
5. Render the React project in the browser.

### Manually using the file generated by Babel
1. Rename `index.js` to `index.original.js`.
2. Rename `index.babel.js` to `index.js`.
3. Run `npx webpack`.

### Babel configuration file
- A configuration file can be used to specify compile instructions.

```json
{ 
    "presets": ["@babel/preset-react"]
}
``` 
  
1. Create `babel.config.json`.
2. Add `"presets": [ "@babel/preset-react"]`.
3. Make changes, re-compile with Babel, and re-bundle with Webpack.
4. Render the React project in the browser.

### Webpack and Babel
- Webpack can be instructed to compile with Babel

1. `npm install babel-loader`
2. Use Webpack file structure and make changes
3. `npx webpack --module-rules-use babel-loader`

### Configure Webpack to use Babel to compile
-  A configuration file can be used to specify bundling instructions
   1. Create `webpack.config.json` file.
   2. Add a JSON object corresponding to `-module-rules-use babel-loader`       
   3. Make changes, save,  and then run `npx webpack`in the terminal
```json
{
    "module":{
         "rules": [
            {
            "use": "babel-loader"
 }
        ]
    }
}
```

### Webpack watch
-  Webpack can watch for any changes to index.js
   1. run`npx webpack --watch`in the terminal
   2. Make changes 
   3. Render the React project in the browser
   4. Press CTRL + C to exit Webpack watcher
   
### Configure Webpack to automatically watch for changes
1. Edit  `webpack.config.json` file
2. Add "watch": true
3. then run `npx webpack` in the terminal
   
```json
{
    "module":{
         "rules": [
            {
            "use": "babel-loader"
         }
        ]
    },
    "watch": true
}
```

### Getting Started with React
Exercise:
- Render plain HTML with React.
- Output a variable.
- Add a <button> with a click handler.
- Add a <form> with a submit handler.
- 
Notes:
`<p>The message is: {message}</p>`

- Use curly braces to escape to JavaScript.
- Extensions like `.js` are not necessary for the import statement anymore because webpack takes care of this by default.
- Event handlers are callback functions (without parentheses).
- The event variable is automatically passed to event handlers.

### Debugger modes
`npx webpack --mode development`
- By default, webpack disables the debugger with production mode
- To enable the debugger, set the mode to development

###  Configure Webpack to automatically start in developer mode
  1. Edit `webpack.config.json`
  2. Add `"mode": "development"`
  3. Save the file and then run`npx webpack` in the terminal
     - [If this works, it will stop at the debugger.]

### Webpack source map
- Some code in the debugger might look different than the original code.
- A source map provides instructions how to convert the mangled code back to the original code.
  ]
1. Add an internal module to the code.
2. Start debugging and observe the internal module.
3. `npx webpack --devtool source-map`
4. Debug and observe the internal module.
```jsx
{
    "module":{
         "rules": [
            {
            "use": "babel-loader"
         }
        ]
    },
    "watch": true,
    "mode": "development",
    "devtool": "source-map"
}
```

### Embedding a YouTube video
1. Find a video from https://youtube.com.
2. Click on the share icon.
3. Copy the embed code with <iframe>.
4. Paste it into the React project.

### YouTube errors
- camelCase the attributes
- HTML attributes must be camelCase in React

### iframe
- Stands for inline frame.
- Embeds code from one website to the current website.
- An external web page is directly displayed in the current page.

### Search Vimeo videos without an account
https://vimeo.com/search

### Browse TikTok videos without an account
https://www.tiktok.com/foryou

### Download videos from Pexels
https://www.pexel.com/videos/

### camelCase properties
- HTML properties must be camelCase in React.

### Embedding a Vimeo video
1. Find a video from https://vimeo.com/search.
2. Click on the Share icon.
3. Copy the embed code with `‹iframe>`.
4. Paste it into the React project.

### Vimeo error and React inline styles
- Uncaught Error: The 'style' prop expects a mapping from
style properties to values, not a string. For example,
style={{marginRight: spacing + 'em'}} when using JSX.`
- Inline styles must be an object (not a string) in React

1. Convert all the inline style strings into an object.
2. Place quotes around CSS keywords and numbers with units.
3. Fix the other errors.

### JSX
- Stands for JavaScript XML.
- The syntax that looks like HTML, but JavaScript can be inserted into it.

### Embedding a Twitch video
1. Find a video from https://www.twitch.tv.
2. Click on the Share icon.
3. Copy the embed code with <iframe>.
4. Paste it into the React project.

### Twitch errors and Booleans
- Received the string 'true' for the boolean attribute 'allowFullScreen.
Although this works, it will not work as expected if you pass the string
"false". Did you mean allowFullScreen={true}?
-  The Boolean value must be escaped in React.
- A Boolean value in quotes is invalid.
  
1. Fix the property casing errors with camelCase.
2. Convert the string to Boolean by escaping it.

### Editing the Twitch URL - this does not work for my video
- Provide the parent or domain where the video is embedded
Example: localhost
Example: user.github.io

- The domain in the browser address bar
Example: localhost
Example: 127.0.0.1
Example: user.github.io

### Embedding a TikTok video - I skipped this part 
1. Find a video from https://www.tiktok.com/foryou.
2. Click on the Share icon.
3. Copy the embed code.
4. Paste it into the React project.

### TikTok errors and className - I skipped this part 
- Invalid DOM property `class`. Did you mean `className`?
-  The class attribute must be `className`.
-  The keyword `class` is reserved for creating a JavaScript class

1. Fix the class property error.

### Styles with hyphen
`max-width:"605px"`
- Convert inline styles from string to object.
- The dash is reserved for math subtraction.
- Use camelCase instead.
  
### Embedding a local video
```html
<video src="assets\videos\5607991-uhd_3840_2160_30fps.mp4" controls width="500px"></video>
```
1. Find a video from https://www.pexels.com/videos.
2. Create the folder `assets` next to `src`.
3. Download the video to the `assets` folder.
4. Set the `src` relative path and add `controls`.

### React components
- Created with a function that returns an HTML tag

```javascript
<MyGreeting/>
import React from "react";

export function MyGreeting () {
    return (<section>
        <h3>My Greeting</h3>
        <p>Hello, world!</p>
    </section>);
}
```
- They are like custom HTML tags. 
- They can contain or group together multiple HTML tags. 
- The name of the component must start with a capital letter. 

### React function components
- Created with a function that returns an HTML tag
```javascript
import { useState } from "react";
import React from "react";

export function MyGreeting () {
    // let greeting = "Hello, world!";
    const myArray = useState("Amazing world!");
    const greeting = myArray[0];
    
    const setGreeting = myArray[1];
    setTimeout(changeGreeting,3000);


    return (<section>
        <h3>My Greeting</h3>
        <p>{greeting}</p>
    </section>);

    function changeGreeting() {
        // greeting ="Have a good day!";
        setGreeting("Have a good day!");
    };
}
```

1. Create a `Views` folder in `src`.
2. Create a module called `MyGreeting.js`.
3. Let it export a function called `MyGreeting`.
4. Let it return a <section> with nested HTML tags.
5. Import and use it like a self closing HTML tag.

### Variables vs state variables
`let message = "Hello world!";`

- Variables - contain values that aren't used for rendering.
- State variables - contain values that affect what is rendered.

### Rendering a variable
1. Create a variable in `MyGreeting` and render its value.
2. Change the value after 3 seconds with `setTimeout`.
3. Add a debugger in the callback to verify.
4. Check if the new value is rendered.

### `useState`
- State variables arecreated by the function ``useState``.
- Returns an array with 2 items.
- Position 0 is the value of the state variable.
- Position 1 is the setter, a function that sets the value of the state variable.
- The convention is to start it with `set` then the variable name.

### Rendering a state variable
1. In `MyGreeting`, create a stite variable with ``useState``.
2. Extract the array items then render the state variable value.
3. Change the value after 3 seconds with `setTimeout` and the setter.
4. Check if the new value is rendered.
5. Check how many times `setTimeout` is called.

### Default value atrribute
```jsx
<input type="number" value="1" min="1" max="3"></input>
<input type="number" defaultValue="1" min="1" max="3"></input>
```
- `value` is read-only and cannot be edited.
- `defaultValue` prefills the field with the value and can be edited.
- See `React Practice` for an example.

 ### React fragment - empty tag
```jsx
<> 
    <h1>Hello World!</h1>
    <p>Have a nice day!</p>
</>
```
- An empty tag that doesn't get rendered.
- Can nest tags without using a `<div>`.
  1. Use a `<div>` to group tags and view the element tree.
  2. Use the empty tag and view the element tree.

### Convert embedded videos to React function components
1. Convert a YouTube embedded video
2. Convert a Vimeo embedded video
3. Convert a Twitch embedded video
4. Convert a local video

### Props (AKA: Properties)
```jsx
<YouTube src="https://www.youtube.com/embed"/>
```
- Props are the HTML attributes of a component.
- Represented by an object, usually called props (short for properties).
    1. Add an attribute and value to a component.
    2. Access the attribute and value from inside the component.
    3. Use the result.

### Adding Bootstrap to React
1. Insert the Bootstrap <link> to <head> in `index.html`
2. Use Bootstrap classes in the JSX of React components.
3. Use className (instead of class) for the element attribute.

### Adding SASS to React
1. Create a .scss file and add some styles.
2. Use the extension Live Sass Compiler to convert.scss to .css.
3. Use <link> in the < head> of index.html to connect the .css file.

### Adding an image to React
1. Put an image into the assets folder.
2. Use the <img> tag with src as the relative path of the image.

### Changing the width or height of an embedded video
- Manually change the width or height of the <iframe >
- Accept width or height as props, then put them in the ‹iframe>

### How to use AI to keep proportions when changing the width
- Ask the AI "If I change the width to 150, what should the height be if the original dimension is 100 width and 75 height?"

### Benefits of using default exports
- Simple import syntax without curly braces
- Can use any name for the imported item

### Benefits of using named exports
- Can import multiple items from a file
- Using the same names as the items prevents confusion

###  Tip: Automatically sizing a video based on the window area
- Use the `vw` viewport width values. 
- Sometimes this doesn't work well with <iframes>.
- Resize an <iframe> based on vw (viewport width). The element size automatically adjusts to the window size.
- 100vw makes the <iframe> size become much smaller than the viewport width.
```jsx
<div style={{ width: "100vw", height:"56.25vw"}}>
<iframe width="100%" height="100%"/>
</div>
```
  
1. Set the <iframe> width and height to 100%. 
2. Wrap a <div> around the <iframe>.
3. Resize the <div> with vw.
4. The <iframe> stretches to fill the <div>.

###  Tip: Resize an embedded video proportionally
```jsx
const dimension = {
width: "100vw"
height: "77.8vw"
}

<div style={dimensions}>
```

1. Instead of changing the <iframe>, put the frame in a new <div>. 
2. Set the height to 100vw.
3. Use trial and error.
4. Or ask the AI what vw the height should be to maintain the proportions. The AI returns a calculation.
5. Use the result of calculation as the React height value.
6. Create a new style object. 
7. Insert the style object into the new div. 

### Review - HTML navigation
```html
<nav >
<a href="index.html" >HOME</a>
<a href="contact.html" >CONTACT</a>
<a href="about.html" >ABOUT</a>
</ nav>
```
- A ‹nav> tag groups <a > tags together
- <a > tags link to different HTML files

1. Add the `<></>` tag.
2. Add the <header> tag.
3. Add the <navbar> tag.
4. Add the <a>nchor tags for the nav links, or whatever nav style. 

### React navigation - how to link to other pages
```jsx
<nav>
    <Link to="/home">HOME | </Link>
    <Link to="/contact">CONTACT | </Link>
    <Link to="/about">ABOUT | </Link>
    <Link to="/videos">VIDEOS | </Link>
</nav>
```

- Different than navigating with regular HTML.
- Links to React components instead of HTML files.
- `<Link>`tags are used instead of `<a>` tags.
- The `to` prop is used instead of the `href` attribute.
- Routes are defined instead of HTML files.

### Routes
`http://localhost:8080/contact`

- Also known as paths.
- The part of URL after the domain.
- The route about is `/contact`.

```jsx
< BrowserRouter>
< Routes>
<Route path="/" element={<Home />}/>
<Route path="/contact" element={<Contact />} />
<Route path="/about" element={<About />} />
</ Routes>
</BrowserRouter>
```

- React needs to know what component to load for each path.
- `<BrowserRouter>` component contains 1 `<Routes>` component.
- The `<Routes>` component contains as many `<Route>` components as needed.
- A `<Route>` defines a route and what component to load.

1. Install react-router: `npm install react-router`.
2. Use `<BrowserRouter>`, ‹Routes>, and ‹ Route> to define paths.
3. Use `<Link>` to navigate to paths.

### Single Page Application (SPAs)
- React websites are usually SPAs (Single Page Applications).
- React load sonly the parts of the page that changes.
- Multi-page sites show a spinner when loading each page.
- SPAs don't show a spinner when loading each page.

1. View a multi-page website: `https://getbootstrap.com`.
2. View an SPA: `https://react.dev`.
3. Observe the spinner.

- NOTE: With React you can go to different pages w/o needing to reload.
- NOTE: you do not have to make a new page each time, only a new React component.

### Virtual DOM
- The DOM represents HTML as a tree of objects, and is represented by the `document` object. 
- A virtual DOM is a copy of the actual DOM.
1. First, React renders into a virtual DOM which is in memory, not in the browser.
2. React comparies the virtual DOM to the actual DOM.
3. React identifies the difference(s) between the virtual DOM and the actual DOM. 
4. When there is a difference, it is considered a state change or update. React renders the difference(s) in the browser.
- Instead of rendering the whole page all over again, the V-DOM keeps what was there and adds in the updates only as they occur. Updating only state changes can improve performance. 

### Lifecycle of React function components
- `Mount`: when the component is rendered for the first time. 
- `Update`: when the component changes after it is rendered. NOTE: changing things w/o reloading the page.
- `Unmount`: when the component is unrendered. NOTE: removing things w/o reloading the page.

### Mount phase
- When the component is rendered for the first time.
- Use the debugger to understand the mount phase of the lifecycle:
  
    1. Place a debugger in a simple component.
    2. Check when the HTML tags render into the element tree.

### Live Server SPA compatiability for React
- Live Server Extension by Ritwick Dey

### Update phase
- When the component changes after it is rendered.
- Triggered by changing the value of a state variable.
- Observe when the component changes after it is rendered.
- The element tree highlights what has been changed. 

1. Add a state variable and a debugger.
2. Check when the HTML tags render into the element tree.
3. Change the value fo the state variable after 3 seconds.
4. The element tree highlights what has been changed.

```jsx
import React, { useState } from "react";
import { Navbar } from "../utils/Navbar.js";

export function MyGreeting() {
	// let greeting = "Hello, world!";
	const myArray = useState("Amazing world!");
	const greeting = myArray[0];
	const setGreeting = myArray[1];

	setTimeout(changeGreeting, 3000);

	return (
		<>
			<header>
				<Navbar />
			</header>
			<section>
				<h3>My Greeting</h3>
				<p>{greeting}</p>
			</section>
		</>
	);

	function changeGreeting() {
		// greeting ="Have a good day!";
		setGreeting("Have a good day!");
	}
}
```

1. Add a state variable and a debugger.
2. Check when the HTML tags render into the element tree.
3. Change the value of the state variable after 3 seconds.
4. The element tree highlights what has been changed.

### Tuple
```javascript
const myTuple = useState("Hello world!");
const greeting = myTuple[0];
const setGreeting = myTuple[1];

```
- A tuple is an array with a fixed length and a fixed arrangement of items.
- It will always have the same length.
- It will always contain the same type of items.
- A tuple is returned by `useState`.
  - The 0 posiition is always the setter.
  - The 1 position is always the value.

1. Capture the result of `useState`.
2. Let the result to look like an array with 2 variables in it.
3. The 2 items from `useState` will be stored in the 2 variables.

### Hooks
`const [message,setMessage] = useState ("Hello World");`
`useEffect(comonentDidUpdate)`

- Functions that start with `use` are called hooks.
- They hook into a component, extending its functionality.
- `useState` gives a function the ability to store a state variable, which keeps its value even when the function is done.
- `useEffect` gives the ability to track the component life cycle by running a callback.

### Destructuring
`const [greeting, setGreeting] = `useState`("Hello world!");`

- A syntax that immediately extracts the items of a tuple.
- The 0 posiition is always the setter.
- The 1 position is always the value.
  
1. Capture the result of ``useState``.
2. Change the result to look like an array with 2 variables in it.
3. The 2 items from `useState` will be stored in the 2 variables.

1.  Capture the result `myTuple` of `useState`.
2.  Let the result `myTuple` to look like an array with 2 variables in it.
3.  The 2 items from `useState` will be stores in the 2 variables.

### useEffect
`useEffect(componentDidUpdate);`

- The `useEffect` hook gives a function the ability to track the component life cycle.
- `useEffect` runs a callback when a component mounts and updates.
- useEffect combines the mount and update phases:
  - In a function component, the mount and update phases are combined.
  - When the component mounts, componentDidUpdate is called.
  - When the component updates, component DidUpdate is called.
- See `MyGreeting` for an example. 
  
1. Create an inner function called `componentDidUpdate`.
2. Add useEffect with the callback `componentDidUpdate`.
3. Put a debugger in `componentDidUpdate`.

### Code that updates should only be called within useEffect
```jsx
function componentDidUpdate() {
setTimeout (changeMessage, 3000);
}
```

1. Change the state variable from within `componentDidUpdate`.
2. Use debugger to track the component life cycle.
3. `componentDidUpdate` is part of the `useEffect` chain. 

### How to tract the mount and update phases separately
A state variable can be used to determine the exact phase.

1. Add a state variable called `didMount` and set it to `false`.
2. When `componentDidUpdate` is called, if `didMount` is false, then the component is in the mount phase. Set `didMount` to `true`.
3.  When `componentDidUpdate` is called, if `didMount` is true, then the component is in the update phase.

### useEffect dependencies
`useEffect(componentDiUpdate, [greeting]);`

- `useEffect` can be instructed to track specific variables when they update.
- Use an array to list the state variables to keep track of.
- Without the dependency list, useEffect tracks all state variables in the component.

1. Add a dependency list to `useEffect`.
2. Use a debugger to observe the difference a dependency list makes.

### useEffect empty dependency list
`useEffect(componentDidUpdate, []);`
- When an empty dependency list is provided, the useEffect runs only once.

1. Provide an empty dependency list for `useEffect`.
2. Use a debugger to observe the difference an empty dependency list makes.

### useEffect splitting
`useEffect(componentDiUpdate, [greeting]);`
`useEffect(componentDidUpdate, []);`
- Multiple `useEffect` statements can be used in a single component.
- Give callbacks a more specific purpose.

1.  Create a useEffect to track the mount phase.
2.  Create a useEffect to track the update phase.
3.  Use a debugger to observe the difference.

###  Tip: Centering images or videos
```javascript
const center =
width: "fit-content",
justifySelf: "center"

	<div style={{wdith:"fit-content", justifySelf:"center"}}>
		<img
		src="../assets/images/AdobeStock_739653522.jpeg" />
	</div>
```
1. Wrap a <div> around the elements to center.
2. Set the <div> width to "fit-content".
3. Set the <div> justifySelf to "center".
4. OPTIONAL: Set the <div> parent display to "grid".

###  Tip: Use asset paths relative to the dist folder
- Webpack bundles your React code into the `dist` folder.
- The `assets` folder is adjacent to the `dist` folder.
- 
1. Write `src` relative paths as if they start in the dist folder.
2. <img src="../assets/picture.jpg"/>.

Remember:
`./ `= same folder
`../`=back one folder 
`../../`=back two folders

### Unmount Phase
- When the component is unrendered.
- Navigating to another page will cause the previous page to unmount.
  - NOTE: changing pages IS unrendering the component
  
```jsx
function componentDidMount (){
    return componentDidUnmount;
}
```
### To track the unmount phase, return a callback function during the mount phase
```jsx
function componentDidMount () {
return componentDidUnmount;
}
```
1. Create an inner function called `componentDidUnmount`.
2. Let `componentDidMount` return `componentDidUnmount`.
3. Use a debugger to track when a component unmounts.
4. Navigate to a different page component to unmount the current page component.

### useEffect splitting
```jsx
useEffect ( componentDidMount, [] );
useEffect( componentDidUpdate, [greeting] );
useEffect ( componentDidUnmount, [] ) ;
```
1. Remove `componentDidUnmount` from `componentDidMount`.
2. Create an inner function called `displayMessage`.
3. Let `componentDidUnmount` return `displayMessage`.
4. Use a `debugger` to track when a component unmounts.
5. Navigate to a different page component to unmount the current page component.

### Returning a function
- A function can be returned by its name
- A function can be returned by its definition

```jsx
function componentDidUnmount () {
    debugger;
    return function displayMessage(){
        debugger;
        console. log("component did unmount");
    }
}
```
1. Let `componentDidUnmount` return the function definition of `displayMessage`
2. Use a `debugger` to track when a component unmounts
3. Navigate to a different page component to unmount the current page component

### Anonymous functions
```jsx
function componentDidUnmount () {
return function {
console. log("component did unmount");
} ;
}
```
- Function names are optional.
- Can keep the function name to describe what the function does.

1. Let `componentDidUnmount` return the function definition without a name.
2. Use a debugger to track when a component unmounts.
3. Navigate to a different page component to unmount the current page component.

###  Tip: Adding depth to an image or video
```javascript
const depth = {
    borderRadius: "10px",
    boxShadow: "10px 10px grey",
}
```
1. Set the element `borderRadius` to "10px".
2. Set the element `boxShadow` to "10px 10px grey".
3. Change the numbers and colors as necesary.
4. add `style={depth}` to the `<iframe>` where the video is embedded.

### Component styles
`import "./Home.scss";`

- Components can import local style files.
- Imported style files don't need to be manually linked to index.html.
- Can create a style file per component.
- Babel loader cannot compile CSS.

### Install modules for importing component styles
`> npm install sass sass-loader css-loader style-loader`

1. sass
2. sass-loader
3. css-loader
4. style-loader

### Configure Webpack for component styles
```javascript
export default {
    //MODULES ARE CODE/FILES THAT ARE IMPORTED
    module:{
        //RULES ARE A LIST OF WAYS TO PROCESS THE MODULES
         rules: [
            {   
                exclude: /\.(scss|css)/,  //DON'T COMPILE STYLE MODULES
                use: "babel-loader",//USE THIS LOADER TO COMPILE ALL OTHER MODULES
            },
            {   
                test: /\.(scss|css)/, //COMPILE STYLE NODULES
                use: ["style-loader", "css-loader", "sass-loader"], //USE THESE LOADERS TO COMPLILE STYLE MODULES
            },
        ],
    },
    watch: true, //WATCH FOR CHANGES. PRESS CTRL+C TO CANCEL WATCH
    watchOptions: { aggregateTimeout: 1000}, //GIVING WEBPACK MORE TIME TO COMPILE PREVENTS BUILD ERRORS
    mode: "development", //ENABLES THE DEBUGGER
    devtool: "source-map", //ENABLES DEBUGGER CODE TO MATCH ACTUAL CODE
};
```
1. Rename `webpack.config.json` to `webpack.config.js` and add `export default` to the top.
2. Add `{test: /\.(scss|css)/}`.
3. Add `{use: [style-loader", "css-loader", "sass-loader"]} `.
1. Add `exclude: /\.(scss|css)/` to the babel loader setting.
2. Add descriptive comments.

### Configure Webpack to avoid build errors
`Uncaught Error: Module build failed`
-   Webpack now needs more time to compile the project

```javascript
{watch: true,
watchOptions: {aggregateTimeout: 1000},
}
```
1.  `watchOptions: { aggregateTimeout: 1000}`
2.  A a descriptive comment.

### Component styles
- <style> tags are dynamically added to the element tree.
- Imported styles apply to all papps of the website.
- The style-loader package adds the `<style>` to the files automatically.
- Use class and id selectors for more specificity.
  
```css
#homeTitle {
	background-color: rgb(147, 147, 198);
}

.highlight {
	background-color: yellow;
}

.center {
	width: fit-content;
	justify-self: center;
}

.depth {
    border-radius: 10px;
	box-shadow: 10px 10px grey;
}
```
  
1. Create component style files, separately for each component. 
2. Any styling that you want to be global (used across the entire site), put it in the `index.scss` style file
3. Other styling should be put in a style file specifically for the component (ex: Videos.scss) and then imported into that file (ex: Videos.js).
4. . Import them.

### Script tags in React
- In React, `<script>` tags are only able to run 1 line of code.
- Move code in `<script>` tags to `componentDidMount`.
- Example: `imageMapResize ();`

1. Add script to `index.html`: `<script src="https://cdn.jsdelivr.net/npm/image-map-resizer@1.0.10/js/imageMapResizer.min.js"></script>`
2. Create `ImageMap` component:
  
```jsx
import React, { useEffect } from "react";

export function ImageMap() {
	useEffect(componentDidMount, []);
	return (
		<>
			<header></header>
			<main>
				<img
					// width=" 25%"
					usemap="#my-image-map"
					src="../assets/2d-shapes.jpg"
					alt="shapes"
				/>
				<map name="my-image-map">
					<area
						title="Click the rectangle."
						coords="195,70 365,170"
						shape="rect"
						href="https://www.oed.com/dictionary/rectangle_n?tab=factsheet#26289840"></area>
					<area
						title="Click here."
						coords="609,116,56 "
						shape="circle"
						href="#circle"></area>
					<area
						title="Click me!"
						coords="609,523, 635,509, 658,539, 636,579, 608, 602, 573,575, 564,563, 558, 528, 578, 509"
						shape="poly"
						href="http://google.com"></area>
				</map>
			</main>
		</>
	);

	function componentDidMount() {
		imageMapResize();
	}
}
```

### Tip: Add id to < body> sections and use parent syntax for specificity
```html
<header id="homeHeader"></header>
<main id="homeMain"></main>
<footer id="homeFooter"></footer>
```
```css
#homeMain {
    h1 {
        font-size: large;
    }
    .highlight {
        background-color: yellow;
    }
}
```

- Add `id` to body sections
- Use parent syntax for style specificity

### Unmount phase
```jsx
const [video, setVideo] = useState(<YouTube />);
```
- A condition can cause a component to unmount.
  
1. Add `componentDidUnmount` to a component, indicating when it unmounts.
2. In a different component, let a state variable store the previous component.
3. Render the state variable.
4. After a few seconds, store empty tags in the state variable.
   
### Tip: Getting elements by their id (the standard way)
`window[outputTag].innerHTML += message;` (window object is non-standard)
`const myOutputElement = document.getElementById("myOutputTag");`(document object is standard)

- Accessing elements through the `window` object may not work on some browsers.
- The standard way of accessing elements is through the `document` object, NOT thru the window object.
- Use the method `document.getElementById` instead.

    1. Remove `window[elementid] ` from the `output` utility function.
    2. Standardize it with `document.getElementByld`.

```jsx
export function output(
    message = "",
    outputTag = "outputTag",
    shouldAppend = true
) {
    const outputElement = document.getElementById(outputTag);
    if (shouldAppend) outputElement.innerHTML += message;
    else outputElement.innerHTML += message;
}
```
- It is better code to use the element that describes what you want it to do.

### Component feedback output
`<output>{ message }</output>`
- Use React to insert JSX feedback.
  
    1. Create a `state` variable `message` and store it in empty tags.
    2. Create a form to receive input.
    3. Create an inner function `handleSubmit` to handle the form submission.
    4. Let `handleSubmit` set `message` to JSX with feedback from the form.
 
 Example: OutputPractice.js
 ```jsx
 import React, { useState } from "react";
 
 export function OutputPractice() {
    const [message, setMessage] = useState(
        <p>Hello OutputPractice Component!</p>
    );
    return (
        <main>
            <form onSubmit={handleSubmit}>
                Enter some text:
                <input />
                <input type="submit" />
            </form>
            <output>{message}</output>;
        </main>
    );
    function handleSubmit(event = new Event()) {
        debugger;
        event.preventDefault();
        const inputs = event.target;
        const textInput = inputs[0];
        const userText = textInput.value;

        setMessage(<p>You entered {userText}</p>);
    }
}
```
- React automatically calls handleSubmit and passes in the value of the event variable. If we do not name/store it in a variable, we will not be able to use the variable
- useState returns a tuple, which is an array with a fixed # of items, in this case 2 items 

### Tip: Stop babel-loader from trying to compile non-JavaScript files

`exclude: /\.(scss|css|otf|ttf|jpg|)/`
`test: /\.js/`

-   Add non-JavaScript files to the exclude list.
-   Or add JavaScript files to the test list.
-   The symbols are called RegEx, which stands for Regular Expression.

### Tip: Downlading and installing fonts
1. Go to https://www.dafont.com.
2. download a font.
3. unzip the font file.
4. move the font file to the `asset` folder.
5. see `Home.scss` for the demo.

### Tip: Standardize the React root element
```jsx
const root = createRoot (window.bodyTag);
```
- Use the `document` object to get the `root` element.
- Don't use the `window` object to get the `root` element anymore.

```jsx
const bodyTag = document.getElementById("bodyTag");
const root = createRoot (bodyTag);
```

### Tip: Import global styles wherever they are used
`import "../index.scss";`

-   Global styles are used by multiple components.
-   Import global styles into each component that uses them.
-   Provides a reference where styles are coming from.
-   Styles from a file are only injected once into the DOM.
  
### Tip: Import asset paths into components
`import src from "../../assets/picture.jpg"`
-   Assets like pictures and videos can be imported.
-   Webpack must be configured to allow this syntax.

1.  In `webpack.config.js` add an object to `rules`.
2.  `test: /\.(jpg|png|mp4)/`
3.  `type: "asset/resource"`

### Tip: Use the import variable
`<img src={src}/>`

-   The import variable stores the path to the object.
-   Replace the asset path with the variable.
  
### Tip: Configure Webpack to fix build errors
`Uncaught Error: Module parse failed:`
- The asset loader may require more time to build.
  
1. Edit `watchOptions` in `webpack.config-js`.
2. Update `aggregateTimeout: 2000`..
3. Make changes to the project, like image width.
4. Increase the timeout by 1s until build errors areresolved.

### Tip: Update the React template
- Install useful packages
- Add style and asset loaders to webpack.config.js
- Add BrowserRouter to index.js
- Add pages and Navbar to each page
- Add Bootstrap to index.html
- CTRL+F5 will reload the page
- CTRL +D will allow you to select the same items simultaneaously
  
1. npm install _________
   - sass
   - sass-loader
   - style-loader
   - react-router
2. converted `webpack.config.json` file to a Javascript (.js) file, then add the following rules:
 ```javascript   
    test: /\. js /, //COMPILE JS FILES 
        
    {
               test: /\.(jpg|png|mp4)/,
                //EXAMINE ASSET FILES
               type: "asset-resource",
                //SPECIFIES THAT THESE FILES
                ARE ASSETS; THIS IS A BUILT IN FEATURE
             },
```
3. added BrowserRouter to index.js
4. added pages and a NavBar
5. added Bootstrap to index.html
6. `const domain = window.location.hostname` detects the domain where the page is rendering
   - added to the NavBar component in React workspace
7. Changed the routes based on the Domain
   1. determine the domain
   2. deternine the root path based on the domain
   3. change <Link> based on root path
   4. change <Route> based on root path
8. Customize Bootstrap Carousel
data-bs-target="#idName"

### Detect where your page is rendering
`const domain = window. location.hostname`
- Your page renders on your local machine
- Your page renders in GitHub
- Use window.location.hostname to get the domain

### Dynamically change routes based on the domain

```js
<Link to={`${rootPath}/`}>HOME
<Link to={`${rootPath}/gallery`}>GALLERY
<Link to={`${rootPath}/contact`}>CONTACT
```

-NOTE: only the opening tags were used so it's more readable
- Useful for web hosting that change the root path, like GitHub

1.  Determine the domain.
2.  Determine the root path based on the domain.
3.  Change `<Link>` based on the root path.
4.  Change `<Route>` based on the root path.

### Tip: Custom 404 error page on GitHub
`404 File not Found`
- The 404 error page on GitHub can be customized.
- GitHub can automatically load `404.html`.
1. Create a file called `404.html` next to `index.html`.
2. Customize `404.html`.
3. Push changes to GitHub.

### Configure Live Server for SPAs
   - Load `index.html` on 404 errors.
   - NOTE: React is in `main.j`s, which loads `Browser Router`, which then loads the page you want.

### Fix 404 errors for SPAs on Github
   - Don't directly load the 404 page; copy the contents of the `index.html` page into `404.html` then push the changes to GitHub.

### Tip: Add tab titles for pages
``` javascript
const titleTag = document.getElementById("titleTag");
titleTag.innerHTML = "React Workspace - Videos" ;|
```
``` javascript
document.title = "React Workspace - Videos";
```
- When a page mounts, set the tab title
  
1. add <title id="titleTag"></title> to the <head> of index.html
2. add `document.title = "Page Title";` to componentDidMount
3. Let `useEffect` track the mount phase.
4. When the component mounts, set the `innerHTML` of the `title` tag or set `document.title`. The `id` of the title tag is not needed for `document.title`.

- NOTE:after the component mounts, the elements in the element tree are then rendered

### Review - Bootstrap navbar
`<a class="active nav-link">`
- Some Bootstrap navbars require the `active` class
- With HTML sites, the `active` class is set with each HTML file
- In React, there is usually only 1 `<Navbar>` component

1. Create new component called `ActiveNavBar.js`

### Automatically set the active class (for navbars) in React
1. Convert `<Link>` to `<NavLink>`
2. The `active` class is automatically added
```js
<nav>
    <NavLink to={`${rootPath}/`}>Home</NavLink>
    <NavLink to={`${rootPath}/about`}>About</NavLink>
    <NavLink to={`${rootPath}/contact`}>Contact</NavLink>
</nav>
```

### Tip: Global header and footer
- A `header` and `footer` can be inserted into `BrowserRouter`
- The `header` and `footer` will be rendered with all pages
1. Create `<Header />` and `<Footer />`
2. Insert `<Header />` before `<Routes />`
3. Insert `<Footer />` after `<Routes />`

Example: 
```jsx
    <BrowserRouter>
        <Header />
        <Routes>
            <Route path="/" element={<Home />} />
            <Route path="/about" element={<About />} />
            <Route path="/contact" element={<Contact />} />
        </Routes>
        <Footer />
    </BrowserRouter >
```

### Tip: Pass extra variables to handlers
```js
function handleSubmit(event) {
  handleSignIn(event, setErrorMessage);
}
```

1. Create the controller `handleSignIn.js`
2. In `SignInModal`, move the contents of `handleSubmit` to `handleSignIn.js`
3. Let `handleSubmit` call `handleSignIn` with the variables it needs
4. Update the parameters in `handleSignIn. js`

### Tip: NavLink endpoints and sub-paths
```js
<NavLink to="/shop/shoes" end>
```
- By default, `NavLink` works with sub-paths by putting "active" on each element in the path.
- To disable sub-path support, use the `end` prop on the specific NavLink.
- Useful for domains that use a different root path, like GitHub.
- Press CTRL + F5 for a hard refresh of the browser.
- Use root relative path (`src="/dist/main.js"`) instead of relative path in index.html.

### Label a group of related inputs
- A group of related inputs, such as `radio buttons`, may need a label.
- Some browsers will show an error if `<label>` is used for a group of inputs.

```html
<form>
 <fieldset>
    <legend>    </legend>
        <input type="radio"/><i>icon</i>
        <input type="radio"/><i>icon</i>
        <input type="radio"/><i>icon</i>
 </fieldset>
</form>
```
1. Use `<fieldset>` to group together a set of related inputs.
2. Nest `<legend>` into `<fieldset>`.
3. Use `<legend>` to label `<fieldset>`.

### Remove node_modules and backup folders from the repository
1. Go to a branch that has `node_modules` in the repository.
2. Add `node_modules` to `gitignore` file.
3. Run the command `git rm -r --cached node_modules`.
4. Run the command `git add .`.
5. Run the command `git commit -m "ignored node_modules"`.
6. Push the branch to GitHub.
7. Repeat these steps for each branch that has `node_modules` in the repository.
8. If you're not using the branch anymore, it is not necessary to push it to main.

### On refresh, redirect 404 errors to index.html
- In an SPA, copying index.html to 404.html doesn't look like an error.
- When 404.html is loaded, web search engines consider it an error.
- To clear the error, use a script so that 404.html redirects to index.html.

### Refresh and 404 redirect concepts
- 404.html
- window.location.pathname 
- window. location.replace
- window.localStorage 
- Root path 
- React components
- BrowserRouter
- useState
- useNavigate

### The localStorage object
```jsx
window.localStorage.setItem("redirect", path);
window.localStorage.getItem("redirect");
```
- Contains methods to store data into the browser memory.
- Method `setltem` - stores a key and value into the browser.
- Method `getltem` - returns the value of a key in browser memory.

### Pathname and replace
```jsx
const path = window. location.pathname;
window.location.replace("/");
```
- `window.location.pathname`contains the current path in the url
- `window.location.replace` is a method that loads a url or path
- When replace is activated, a page reload is triggered

### The useNavigate hook
```jsx
const navigateTo = useNavigate();
navigateTo("/about");
```
- The `useNavigate` hook gives functions the ability to access `BrowserRouter`
- `useNavigate` returns a function that accepts a path string
- When the function is activated, `BrowserRouter` loads the specified path

### Clear the error
- To clear 404 errors, redirect to the home page
1. Create `redirect.js` and let it be the only script linked to `404.html`.
2. Save `window.location.pathname` in `localStorage`.
3. Redirect to the root path with `window.location.replace`.

### Refresh the original page
1. Create a component called `HandleRefresh`, and nest it in `BrowserRouter`
2. Nest all the contents in `BrowserRouter` into `HandleRefresh` and
children
3. During the mount phase, use a condition to check the pathname in
`localStorage`
4. If there is a pathname, let `HandleRefresh` navigate to it, then clear the
pathname
5. use `setTimeout` to delay the rendering of `HandleRefresh` children if there's a pathname


